---
layout: post
title:  "mysql5.7的安装"
date:   2016-10-25 19:45:06 +0800
categories: jekyll update
---
> 测试


## centos 6.5下rpm yum仓库在线安装mysql5.7 非编译

 1. 查看当前本地仓库mysql(存在不一定是本机已安装的意思,可以理解成一个资源文件)

	```
	rpm -qa | grep mysql
	```
	![](http://img.blog.csdn.net/20160825104322717)
		
	
	```
	yum -y remove mysql-libs*  
	```
 2. 列表内容

	ddddrpm -qa | grep mysql

 3. 打开mysql的官网      
 
 http://dev.mysql.com/downloads/repo/yum/


 4. 根据需要选择mysql版本，这里我选择第二个
 　![](http://img.blog.csdn.net/20160825104425655)
 　

 5. 无需注册，地址就在这个页面上
 ![](http://img.blog.csdn.net/20160825104533203)

 6. 拷贝这个地址 ，在终端下输入
 

	```
	wget http://dev.mysql.com/get/mysql57-community-release-el6-8.noarch.rpm
		
		yum localinstall mysql57-community-release-el6-8.noarch.rpm
		
		yum install mysql-community-server
	```

 7. 拷贝这个地址 ，在终端下输入

   

	```
	chkconfig --levels 235 mysqld on　　　　          	 #mysql自启动
	/etc/init.d/mysqld start　　　　　　　　         	    #启动mysql
	grep 'temporary password' /var/log/mysqld.log    	#获得MySQL初始密码
	mysql -uroot -p'初始密码'                      	    #登录
	ALTER USER 'root'@'localhost' IDENTIFIED BY '新密码';     #重新设置密码
	
	```

 

 - 修改字符集
	 

	```
	vi /etc/my.cnf
	```
	 下面是设置为utfmb4的字符集
	```
	[client]
	default-character-set = utf8mb4
	
	[mysql]
	default-character-set = utf8mb4
	
	[mysqld]
	character-set-client-handshake = FALSE
	character-set-server = utf8mb4
	collation-server = utf8mb4_unicode_ci
	init_connect='SET NAMES utf8mb4'
	```
	

 ##- 附录1
 #### Q:忘记密码怎么办？

	```
	vi /etc/my.cnf
	
	```
	1.在配置文件里加入两行越过密码验证
	```
	
	[mysqld]
	skip-grant-tables
	skip-networking
	
	```
	2.然后修改密码 (修改语句针对mysql5.7)
	```
	UPDATE user SET Password=PASSWORD('newpassword') where USER='root';
	
	FLUSH PRIVILEGES;
	
	quit;
	```
 ##- 附录2
 
	Q:远程连接该怎么设置？
		
	```
	mysql -uroot -p    #输入密码后进入mysql
	use mysql;
	select user,host from mysql;     #用户root和mysql.sys的host均为localhost 表明只能本机登录mysql
	update user set Host = '%' where User = 'root';
	select user,host from mysql;  #这下root的host改为%任意登录了
	quit;
	```
	
	```
	service msyqld restart    #重启一下mysql就可以连接了
	```